<h2 mat-dialog-title>Загрузка CSV</h2>

<div mat-dialog-content class="content">
  <input type="file" accept=".csv,text/csv" (change)="onFileChange($event)" />

  <div class="file-info" *ngIf="file">
    <mat-icon>description</mat-icon>
    <span>{{ file.name }}</span>
  </div>

  <div class="preview" *ngIf="preview.length">
    <div class="hint">Превью первых строк файла</div>
    <table>
      <thead>
        <tr>
          <th *ngFor="let h of preview[0]; let i = index">#{{ i + 1 }} {{ h }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of preview.slice(1)">
          <td *ngFor="let c of row">{{ c }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <mat-progress-bar *ngIf="uploading" mode="determinate" [value]="progress"></mat-progress-bar>
</div>

<div mat-dialog-actions align="end">
  <button mat-stroked-button (click)="close(false)" [disabled]="uploading">Отмена</button>
  <button mat-flat-button color="primary" (click)="upload()" [disabled]="!file || uploading">
    {{ uploading ? 'Загрузка…' : 'Загрузить' }}
  </button>
</div>
